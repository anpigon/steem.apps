<!doctype html>
<html lang="ko">
<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-store" />
<meta http-equiv="expires" content="-1" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />

<link rel="icon" type="image/x-icon" href="./favicon.ico?v=2">
<link rel="apple-touch-icon-precomposed" sizes="57x57" href="./img/favicons/favicon-57.png" type="image/png" >
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="./img/favicons/favicon-114.png" type="image/png" >
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="./img/favicons/favicon-72.png" type="image/png" >
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="./img/favicons/favicon-144.png" type="image/png">
<link rel="apple-touch-icon-precomposed" sizes="60x60" href="./img/favicons/favicon-60.png" type="image/png" >
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="./img/favicons/favicon-120.png" type="image/png">
<link rel="apple-touch-icon-precomposed" sizes="76x76" href="./img/favicons/favicon-76.png" type="image/png" >
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="./img/favicons/favicon-152.png" type="image/png">
<link rel="icon" type="image/png" href="./img/favicons/favicon_196.png" sizes="196x196">
<link rel="icon" type="image/png" href="./img/favicons/favicon_128.png" sizes="128x128">
<link rel="icon" type="image/png" href="./img/favicons/favicon_96.png" sizes="96x96">
<link rel="icon" type="image/png" href="./img/favicons/favicon_32.png" sizes="32x32">
<link rel="icon" type="image/png" href="./img/favicons/favicon_16.png" sizes="16x16">

<meta name="msapplication-TileColor" content="#FFFFFF">
<meta name="msapplication-TileImage" content="./img/favicons/favicon_144.png">
<meta name="msapplication-square70x70logo" content="./img/favicons/favicon_70.png">
<meta name="msapplication-square150x150logo" content="./img/favicons/favicon_144.png">
<meta name="msapplication-square310x310logo" content="./img/favicons/favicon_310.png">

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue-router/dist/vue-router.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/http-vue-loader/src/httpVueLoader.min.js"></script>
<title>Destiny Child Info</title>
<!-- Latest compiled and minified CSS -->
<style>
.active {
   background:#e7e7e7; color:#555;
}
</style>


<script src="https://www.gstatic.com/firebasejs/5.7.1/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyBFKXhSFnjoGNp43ilg_mLrmBDAzS2AHL4",
    authDomain: "decha-6276f.firebaseapp.com",
    databaseURL: "https://decha-6276f.firebaseio.com",
    projectId: "decha-6276f",
    storageBucket: "decha-6276f.appspot.com",
    messagingSenderId: "500322112743"
  };
  firebase.initializeApp(config);

  // Get a reference to the database service
  var database = firebase.database();

  database.ref('child').once('value').then(function(snapshot) {
    //var username = (snapshot.val() && snapshot.val().username) || 'Anonymous';
    console.log("snapshot.val()", snapshot.val());
    // ...
  });

  var rootRef = firebase.database().ref();
  rootRef.once('value').then(function(snapshot) {
    //var username = (snapshot.val() && snapshot.val().username) || 'Anonymous';
    console.log("rootRef.val()", snapshot.val());
    // ...
  });




</script>

</head>
<body style="padding-top: 5em;">

  <nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">
      <!--span style="background-color:white;color:black;">Destiny</span>
      <span style="background-color:black;color:yellow;">CHILD</span-->

      <!--span style="background-color:white;color:black;">데스티니</span>
      <span style="background-color:black;color:yellow;">차일드</span-->

      <img width="180px" height="37px" src="./img/logo.png" />
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
          <a class="nav-link" href="#/">Child</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#/item">Item</a>
        </li>
        <li id="dropdown_family" class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            이벤트
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            <a class="dropdown-item" href="#">동광클리어 이벤트</a>
            <a class="dropdown-item" href="#">Another action</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="#">Something else here</a>
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#/etc">ETC</a>
        </li>
        <!--li class="nav-item">
          <a class="nav-link disabled" href="#">Disabled</a>
        </li-->
      </ul>
      <!--form class="form-inline my-2 my-lg-0">
        <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
      </form-->
    </div>
  </nav>

  <div id="app">
    <router-view></router-view>
  </div><!-- end app -->

  <script>
    // 1. 라우트 컴포넌트를 정의하세요.
    // 아래 내용들은 다른 파일로부터 가져올 수 있습니다.
    var updateVersion = "2018.09.28.01";
		function loadVue(path){
			return httpVueLoader('./vue/'+path + '.vue?v='+updateVersion);
		}

    // 2. 라우트를 정의하세요.
    // Each route should map to a component. The "component" can
    // 각 라우트는 반드시 컴포넌트와 매핑되어야 합니다.
    // "component"는 `Vue.extend()`를 통해 만들어진
    // 실제 컴포넌트 생성자이거나 컴포넌트 옵션 객체입니다.
    const routes = [
      { path: '/', component: loadVue('main') },
      { path: '/item', component: loadVue('item') },
      { path: '/foo', component: loadVue('foo') }
    ]



    // 3. `routes` 옵션과 함께 router 인스턴스를 만드세요.
    // 추가 옵션을 여기서 전달해야합니다.
    // 지금은 간단하게 유지하겠습니다.
    const router = new VueRouter({
      routes // `routes: routes`의 줄임

    })

    // 4. 루트 인스턴스를 만들고 mount 하세요.
    // router와 router 옵션을 전체 앱에 주입합니다.
    const app = new Vue({
      router
      , mounted: function () {
        console.log('console.log');
        $(".nav-link").each(
					function(idx, val){
						//console.log(idx, val);
            if( !$(val).hasClass('dropdown-toggle') )
						$(val).on("click",
							function(){
								setToggle(val);
							}
						);
					}
				);

        $("#dropdown_family").on('touchmove touchend click', function(event){
          console.log('dropdown_family');
					//event.stopPropagation();
				});
				$(document).on('touchmove touchend', function(event) {
					if( "dropdown_family" == event.target.id) return;
					if( "true"==$("#navButton").attr('aria-expanded') ){
						$("#navButton").click();
					}
				});

      } // end mounted
    }).$mount('#app')

    router.beforeEach((to, from, next) => {

      //setToggle()
      next();

      console.log(to, from);
    })

    function setToggle(obj){
			console.log('setToggle');
			$(".navbar").find(".active").toggleClass("active");
			//$('.navbar-collapse').collapse('hide');
			//console.log(obj);
			$(obj).toggleClass("active");
			if( $(".navbar-toggler").is(':visible') ){
				$(".navbar-toggler").click();
			}
		}
  </script>
</body>
</html>
